<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title><%= @resume.user_first_name %> <%= @resume.user_last_name %> - Resume</title>
  <style>
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: #ffffff;
      color: #0f172a;
      margin: 0 auto;
      max-width: 800px;
      padding: 40px;
      line-height: 1.75;
    }
    h1 {
      font-size: 2.5em;
      font-weight: 800;
      /* color: #1e293b;
      margin-bottom: 0.2em; */
    }
    h2 {
      font-size: 1.25em;
      font-weight: 700;
      color: #1e293b;
      border-bottom: 1px solid #e2e8f0;
      padding-bottom: 0.25em;
      margin-top: 2em;
      margin-bottom: 1em;
    }
    p, li {
      font-size: 0.95em;
      color: #334155;
    }
    .contact-info {
      font-size: 0.95em;
      color: #475569;
      margin-bottom: 1.5em;
    }
    .section {
      margin-bottom: 2em;
    }
    .experience-item, .education-item, .project-item {
      margin-bottom: 1.5em;
    }
    .experience-header, .education-header, .project-header {
      font-weight: 600;
      color: #0f172a;
    }
    .meta {
      font-size: 0.9em;
      color: #64748b;
      margin-bottom: 0.25em;
    }
    ul {
      padding-left: 1.2em;
      margin-top: 0.5em;
    }
    .skills-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5em;
    }
    .skill-item {
      background-color: #f1f5f9;
      border: 1px solid #cbd5e1;
      border-radius: 9999px;
      padding: 0.25em 0.75em;
      font-size: 0.85em;
      color: #0f172a;
    }
    a {
      color: #3b82f6;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <h1><%= @resume.user_first_name %> <%= @resume.user_last_name %></h1>
  <% if @resume.title.present? %>
    <span><%= @resume.title %></span>
  <% end %>

  <div class="contact-info">
    <p><%= @resume.user_email %> · <%= @resume.user_phone %></p>
    <% if @resume.user_linked_in_url.present? %>
      <p>LinkedIn: <%= @resume.user_linked_in_url %></p>
    <% end %>
    <% if @resume.user_github_url.present? %>
      <p>GitHub: <%= @resume.user_github_url %></p>
    <% end %>
    <% if @resume.user_portfolio.present? %>
      <p>Portfolio: <%= @resume.user_portfolio %></p>
    <% end %>
  </div>

  <% if @resume.summary.present? %>
    <div class="section">
      <h2>Summary</h2>
      <%= @resume.summary.body.to_s.html_safe %>
    </div>
  <% end %>

  <% if @resume.skills.any? %>
    <div class="section">
      <h2>Skills</h2>
      <div class="skills-list">
        <% @resume.skills.each do |skill| %>
          <span class="skill-item"><%= skill.name %></span>
        <% end %>
      </div>
    </div>
  <% end %>

  <% if @resume.experiences.any? %>
    <div class="section">
      <h2>Experience</h2>
      <% @resume.experiences.each do |exp| %>
        <div class="experience-item">
          <div class="experience-header">
            <%= exp.title %> @ <%= exp.company_name %>
          </div>
          <div class="meta">
            <%= exp.location %> · <%= exp.start_date.strftime("%b %Y") %> - <%= exp.end_date&.strftime("%b %Y") || "Present" %>
          </div>
          <% if exp.responsibilities.any? %>
            <ul>
              <% exp.responsibilities.each do |responsibility| %>
                <li><%= responsibility.content %></li>
              <% end %>
            </ul>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>

  <% if @resume.educations.any? %>
    <div class="section">
      <h2>Education</h2>
      <% @resume.educations.each do |edu| %>
        <div class="education-item">
          <div class="education-header">
            <%= edu.school %>
          </div>
          <div class="meta">
            <%= edu.location %> · <%= edu.field_of_study %> · <%= edu.start_date.strftime("%Y") %> - <%= edu.end_date&.strftime("%Y") || "Present" %>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>

  <% if @resume.projects.any? %>
    <div class="section">
      <h2>Projects</h2>
      <% @resume.projects.each do |project| %>
        <div class="project-item">
          <div class="project-header">
            <%= project.title %>
            <% if project.url.present? %>
              · <a href="<%= project.url %>"><%= project.url %></a>
            <% end %>
          </div>
          <p><%= project.description %></p>
        </div>
      <% end %>
    </div>
  <% end %>
</body>
</html>
