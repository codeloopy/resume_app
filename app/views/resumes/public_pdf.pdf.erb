<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title><%= @resume.user_first_name %> <%= @resume.user_last_name %> - Resume</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      margin: 20px;
      color: #333;
    }
    h1 {
      color: #2c3e50;
      border-bottom: 2px solid #3498db;
      padding-bottom: 10px;
      margin-bottom: 20px;
    }
    h2 {
      color: #34495e;
      border-bottom: 1px solid #bdc3c7;
      padding-bottom: 5px;
      margin-top: 25px;
      margin-bottom: 15px;
    }
    .contact-info {
      margin-bottom: 20px;
      color: #7f8c8d;
    }
    .section {
      margin-bottom: 20px;
    }
    .experience-item {
      margin-bottom: 15px;
    }
    .experience-header {
      font-weight: bold;
      color: #2c3e50;
    }
    .experience-company {
      color: #7f8c8d;
      font-style: italic;
    }
    ul {
      margin: 10px 0;
      padding-left: 20px;
    }
    li {
      margin-bottom: 5px;
    }
    .skills-list {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .skill-item {
      background: #ecf0f1;
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <h1><%= @resume.user_first_name %> <%= @resume.user_last_name %></h1>

  <div class="contact-info">
    <p><%= @resume.user_email %> · <%= @resume.user_phone %></p>
    <% if @resume.user_linked_in_url.present? %>
      <p>LinkedIn: <%= @resume.user_linked_in_url %></p>
    <% end %>
    <% if @resume.user_github_url.present? %>
      <p>GitHub: <%= @resume.user_github_url %></p>
    <% end %>
    <% if @resume.user_portfolio.present? %>
      <p>Portfolio: <%= @resume.user_portfolio %></p>
    <% end %>
  </div>

  <% if @resume.summary.present? %>
    <div class="section">
      <h2>Summary</h2>
      <%= @resume.summary.body.to_s.html_safe %>
    </div>
  <% end %>

  <% if @resume.skills.any? %>
    <div class="section">
      <h2>Skills</h2>
      <div class="skills-list">
        <% @resume.skills.each do |skill| %>
          <span class="skill-item"><%= skill.name %></span>
        <% end %>
      </div>
    </div>
  <% end %>

  <% if @resume.experiences.any? %>
    <div class="section">
      <h2>Experience</h2>
      <% @resume.experiences.each do |exp| %>
        <div class="experience-item">
          <div class="experience-header">
            <%= exp.title %> @ <%= exp.company_name %>
          </div>
          <div class="experience-company">
            <%= exp.location %> · <%= exp.start_date.strftime("%b %Y") %> - <%= exp.end_date&.strftime("%b %Y") || "Present" %>
          </div>
          <% if exp.responsibilities.any? %>
            <ul>
              <% exp.responsibilities.each do |responsibility| %>
                <li><%= responsibility.content %></li>
              <% end %>
            </ul>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>

  <% if @resume.educations.any? %>
    <div class="section">
      <h2>Education</h2>
      <% @resume.educations.each do |edu| %>
        <div class="experience-item">
          <div class="experience-header">
            <%= edu.school %>
          </div>
          <div class="experience-company">
            <%= edu.location %> · <%= edu.field_of_study %> · <%= edu.start_date.strftime("%Y") %> - <%= edu.end_date&.strftime("%Y") || "Present" %>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>

  <% if @resume.projects.any? %>
    <div class="section">
      <h2>Projects</h2>
      <% @resume.projects.each do |project| %>
        <div class="experience-item">
          <div class="experience-header">
            <%= project.title %>
            <% if project.url.present? %>
              · <a href="<%= project.url %>"><%= project.url %></a>
            <% end %>
          </div>
          <p><%= project.description %></p>
        </div>
      <% end %>
    </div>
  <% end %>
</body>
</html>
